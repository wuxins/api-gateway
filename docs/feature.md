## 特性列表

#### _接口级安全控制_

API统一接入，隔离外部访问与后台服务，支持对指定调用者开放指定的API，避免所有API都对外暴露，达到保护后台服务的目的。

#### _API生命周期管理_

完整API生命周期管理：设计->开发->测试->上线->下线

#### _Restful_API转发支持_

支持Restful API映射转换，隐藏实际业务接口。

含可变参数时，遵循转换可变参数数量和顺序保持一致即可。

示例 :

    后端内部API: /upstream-service-demo/api/types/{type}/customers/{customerNo}/V1
    网关对外API: /demo/customers/{customerType}/{customerNo}

#### _限流_

加强系统可用性的手段。

有控制开关。

限流方案选型要考虑两个维度，第一个维度是客户端&服务端，第二个维度是分布式&本地。

客户端限流：

    限制同一时刻或者滑动单位时间窗口最大并发能力，至于突发请求能不能及时处理完成，需要后端服务器去保证。
    该方案传递的信息是API服务方对调用者并发QPS的承诺。
    举个例子：网关某个API限流 QPS 1W, 实际QPS 8K，后台服务接收请求不一定立马能处理完，后端实际积压请求会大于1W，如果后端缺乏自我保护措施，可能会引发雪崩。
    常见实现算法：计数器、固定时间窗口、滑动时间窗口、漏桶、令牌桶

服务端限流：

    侧重后台服务的实际处理能力，注重系统的保护。
    常见解决方案：Alibaba Sentinel。

网关采用服务端限流+分布式、本地结合方式。

分布式流控依赖redis，当redis检测不可用时，会根据设置百分比率降级为单机本地流控。

#### _熔断_

加强系统可用性的必备手段。

有控制开关。

熔断在服务消费端实现，当请求异常（异常数过大、异常率过高、耗时过多）达到降级条件时，自动切断当前时间窗口的后续请求，直接快速失败，不去访问服务提供者。

#### _降级_

加强系统可用性的通用手动，方便前后端联调，加强可测试性。

有控制开关。

如下几个举例，可以通过降级很好的解决：

    1、强依赖外部服务出现故障时，需要挂公告
    2、前后端接口联调时，需要后端的数据走流程，但是后端还没有开发完成
    3、全链路压测，需要挡板支持，对比压测数据，寻找瓶颈点

#### _超时控制_

加强系统可用性的必备手段。

接口请求长时间占用资源，会导致系统资源被全部占用，进而系统响应缓慢，无法处理其他请求，系统会假死。

接口超出预期的请求时间，需要监控告警并优化。

#### _客户端鉴权_

用于客户端安全接入。

基于OAuth2.0的服务安全认证。

#### _参数过滤_

提升安全性、可测试性。

#### _API分组_

加强API可治理性。

有分组的概念，可以方便的知道每个分组涉及的API，分组的维度自定义，可以是按流程分组，也可以是按领域分组，也可以是其他维度。

#### _灰度_

灰度发布是指在黑和白之间，能够平滑过渡的一种发布方式。

AB test就是一种灰度发布方式，指生产已发布A版本，在发布B版本时，在同一时间维度，让一部分用户继续用A版本，一部分用户开始用B版本，如果用户对B版本没有什么问题，那么逐步扩大范围，把所有用户都迁移到B
版本上面来。

灰度发布可以保证整体系统的稳定，在初始灰度发布时就可以发现及调整问题，以保证其影响度。

灰度发布分两个方式：

    1、特征发布 
        允许指定用户进入灰度环境
    2、放量发布
        通过逐步放灰度比例的方式，逐步灰度过度到生产版本

#### _监控_

有控制开关。

网关是外部服务的入口，可以用于监控API的健康情况，包括调用日志，耗时情况分析。

#### _API文档生成_

API文档升级和维护自动化，提升开发效率。

可选功能，依托于自定义插件自动上报API文档信息。

